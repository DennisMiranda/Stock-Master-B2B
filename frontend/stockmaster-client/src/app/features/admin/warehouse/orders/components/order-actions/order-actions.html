<div>
  <button
    (click)="toggleMenu($event)"
    class="p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20"
    [class.text-blue-600]="isOpen()"
    [class.bg-blue-50]="isOpen()"
  >
    <lucide-icon [img]="MoreIcon" class="w-5 h-5"></lucide-icon>
  </button>

  <!-- Dropdown Menu -->
  @if (isOpen()) {
  <div
    class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-100 z-50 py-1 animate-in fade-in zoom-in-95 duration-100"
  >
    <button
      (click)="viewDetail()"
      class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
    >
      <lucide-icon [img]="ViewIcon" class="w-4 h-4 text-gray-400"></lucide-icon>
      Ver detalle
    </button>
    <button
      (click)="updateStatus()"
      class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
    >
      <lucide-icon [img]="EditIcon" class="w-4 h-4 text-gray-400"></lucide-icon>
      Cambiar estado
    </button>
    <button
      (click)="generateGuide()"
      class="w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2"
    >
      <lucide-icon [img]="FileIcon" class="w-4 h-4 text-gray-400"></lucide-icon>
      Generar guÃ­a
    </button>
  </div>

  <!-- Backdrop to close -->
  <div class="fixed inset-0 z-40" (click)="closeMenu()"></div>
  }
</div>
